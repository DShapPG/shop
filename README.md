## Техническое задание: Список эндпоинтов для API онлайн-магазина на Django

### Цель
Создать REST API для онлайн-магазина на Django с использованием Django REST Framework (DRF), включающее эндпоинты для управления продуктами, пользователями, корзиной, аутентификацией и базовыми CRUD-операциями (создание, чтение, обновление, удаление).

### Требуемые эндпоинты

#### 1. Продукты
- **GET /api/products/**  
  - Возвращает список всех товаров (с пагинацией).  
- **GET /api/products/<int:pk>/**  
  - Возвращает детали товара по ID.  
- **POST /api/products/**  
  - Создает новый товар (доступно только администратору).  
  - Ожидает: `{"name": "string", "description": "string", "price": decimal, "stock": int}`.  
- **PUT /api/products/<int:pk>/**  
  - Обновляет товар по ID (доступно только администратору).  
  - Ожидает: `{"name": "string", "description": "string", "price": decimal, "stock": int}`.  
- **DELETE /api/products/<int:pk>/**  
  - Удаляет товар по ID (доступно только администратору).  

#### 2. Пользователи
- **POST /api/register/**  
  - Регистрирует нового пользователя.  
  - Ожидает: `{"username": "string", "password": "string", "email": "string"}`.  
  - Доступно без аутентификации.  
- **GET /api/users/<int:pk>/**  
  - Возвращает информацию о пользователе по ID (доступно только самому пользователю или администратору).  
- **PUT /api/users/<int:pk>/**  
  - Обновляет данные пользователя (доступно только самому пользователю).  
  - Ожидает: `{"username": "string", "email": "string"}`.  
- **DELETE /api/users/<int:pk>/**  
  - Удаляет пользователя (доступно только администратору).  

#### 3. Аутентификация
- **POST /api/token/**  
  - Возвращает JWT-токен для аутентификации.  
  - Ожидает: `{"username": "string", "password": "string"}`.  
  - Доступно без аутентификации.  
- **POST /api/token/refresh/**  
  - Обновляет JWT-токен.  
  - Ожидает: `{"refresh": "string"}`.  
  - Доступно без аутентификации.  

#### 4. Корзина
- **GET /api/cart/**  
  - Возвращает корзину текущего пользователя.  
  - Требует аутентификации.  
- **POST /api/cart/**  
  - Добавляет товар в корзину.  
  - Ожидает: `{"product_id": int, "quantity": int}`.  
  - Требует аутентификации.  
- **PUT /api/cart/<int:pk>/**  
  - Обновляет количество товара в корзине (по ID записи в корзине).  
  - Ожидает: `{"quantity": int}`.  
  - Требует аутентификации.  
- **DELETE /api/cart/<int:pk>/**  
  - Удаляет товар из корзины (по ID записи в корзине).  
  - Требует аутентификации.  
- **DELETE /api/cart/clear/**  
  - Очищает всю корзину пользователя.  
  - Требует аутентификации.  

#### 5. Дополнительные эндпоинты
- **GET /api/categories/**  
  - Возвращает список категорий товаров.  
- **POST /api/categories/**  
  - Создает новую категорию (доступно только администратору).  
  - Ожидает: `{"name": "string"}`.  
- **GET /api/products/?category=<int:category_id>**  
  - Фильтрует товары по категории.  
- **GET /api/products/?search=<string>**  
  - Поиск товаров по названию или описанию.  
- **GET /api/products/?price_min=<decimal>&price_max=<decimal>**  
  - Фильтрует товары по диапазону цен.  

### Требования к реализации
- Использовать Django REST Framework и `djangorestframework-simplejwt` для аутентификации.
- Все эндпоинты (кроме `/api/register/`, `/api/token/`, `/api/token/refresh/`) требуют аутентификации через JWT-токен (`Authorization: Bearer <token>`).
- Ограничить доступ к созданию/обновлению/удалению продуктов и категорий только для администраторов (`IsAdminUser`).
- Обеспечить обработку ошибок (404 для несуществующих ресурсов, 400 для некорректных данных, 403 для недостатка прав).
- Реализовать пагинацию для списков (например, 10 элементов на страницу).
- Добавить валидацию входных данных через сериализаторы.
- Создать модели: `Product` (name, description, price, stock, category), `Category` (name), `Cart` (user, created_at), `CartItem` (cart, product, quantity).

### Критерии выполнения
- Все эндпоинты возвращают JSON.
- Аутентификация через JWT-токены.
- Корректная обработка ошибок.
- Код структурирован, следует принципам DRY.
- Тестовые данные (5+ товаров, 2+ категории) созданы через админ-панель.